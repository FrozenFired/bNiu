.border.rounded.p-2.mt-3
	.row
		.col-6
			h3.PternAll 模特印花:
		.col-6.text-right.mt-3.jsUp-objElem(style="display:none")
			a.text-warning(href="/bsPdspuPternUp/"+Pdspu._id) [修改]
	.row
		each Ptern in Pdspu.Pterns
			-a;
			.col-6.col-xl-3.mt-3
				.card.text-center(style="width: 100%;")
					img.card-img-top.border-bottom.js-click-imgEnlarge(src=Ptern.photo, alt="Ptern Photo Lost", width="100%", height="150px", style="object-fit: scale-down;")
					h5.mt-3.card-title.PternOption(id=Ptern._id) #{Ptern.code}
h3.mt-3 库存

- var widthTr = 100/(Pdspu.sizes.length+1);

- getUrl = "/bsPdspuPdskuUpdAjax"
- field="stock", subid='stock', fieldDesp=null;



- let Ptern_Pdskus = Pdspu.Pdskus.filter((Pdsku) => {return Pdsku.Ptern == null});
.isPttern
	table.table.table-hover.table-bordered.text-center
		thead
			tr
				th(width=widthTr+"%")
				each size in Pdspu.sizes
					- let val = size;
					each Size in Sizes
						if Size.size == size
							- val = Size.symbol;
							- break;
					th(width=widthTr+"%") #{val}
		tbody
			each Color in Pdspu.Colors
				- let Color_Pdskus = Ptern_Pdskus.filter((Pdsku) => {return String(Pdsku.Color) == String(Color._id)});
				tr
					td #{Color.code}
					each size in Pdspu.sizes
						- a;
						td
							- let Pdsku = {};
							each Color_Pdsku in Color_Pdskus
								if Color_Pdsku.size == size && String(Color_Pdsku.Color) == String(Color._id) && Color_Pdsku.Ptern == null
									- Pdsku = Color_Pdsku;
									- break;
							- object=Pdsku, value=Pdsku.stock;
							include ../../../../../aaPlugin/ajaxInputUpd
each Ptern in Pdspu.Pterns
	- let Ptern_Pdskus = Pdspu.Pdskus.filter((Pdsku) => {return String(Pdsku.Ptern) == String(Ptern._id)});
	.PternTable(id="PternTable-"+Ptern._id)
		.row
			.col-6
				img.js-click-imgEnlarge(src=Ptern.photo, alt="Ptern Photo Lost", width="100%", height="80px", style="object-fit: scale-down;")
			.col-6.pt-3 #{Ptern.code}
		table.table.table-hover.table-bordered.text-center
			thead
				tr
					th(width=widthTr+"%")
					each size in Pdspu.sizes
						- let val = size;
						each Size in Sizes
							if Size.size == size
								- val = Size.symbol;
								- break;
						th(width=widthTr+"%") #{val}
			tbody
				each Color in Pdspu.Colors
					- let Color_Pdskus = Ptern_Pdskus.filter((Pdsku) => {return String(Pdsku.Color) == String(Color._id)});
					tr
						td #{Color.code}

						each size in Pdspu.sizes
							- a;
							td
								- let Pdsku = {};
								each Color_Pdsku in Color_Pdskus
									if Color_Pdsku.size == size && String(Color_Pdsku.Color) == String(Color._id) && String(Color_Pdsku.Ptern) == String(Ptern._id)
										- Pdsku = Color_Pdsku;
										- break;
								- object=Pdsku, value=Pdsku.stock;
								include ../../../../../aaPlugin/ajaxInputUpd